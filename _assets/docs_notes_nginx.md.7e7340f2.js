import{g as n,f as s,G as a}from"./common-bec3f312.js";const t='{"title":"nginx配置","frontmatter":{"date":"2021-10-10","title":"nginx配置","tags":["nginx","https"],"describe":"nginx配置相关"},"headers":[{"level":2,"title":"nginx配置示例","slug":"nginx配置示例"},{"level":3,"title":"脚手架发布静态页面 history 模式","slug":"脚手架发布静态页面-history-模式"}],"relativePath":"docs/notes/nginx.md","lastUpdated":1660147426760.5005}';var e={};const o=a('<h2 id="nginx配置示例"><a class="header-anchor" href="#nginx配置示例" aria-hidden="true">#</a> nginx配置示例</h2><h3 id="脚手架发布静态页面-history-模式"><a class="header-anchor" href="#脚手架发布静态页面-history-模式" aria-hidden="true">#</a> 脚手架发布静态页面 history 模式</h3><div class="language-yaml"><pre><code><span class="token comment">#以下属性中，以ssl开头的属性表示与证书配置有关。</span>\nserver <span class="token punctuation">{</span>\n    listen 443 ssl http2;\n    listen <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>443 ssl http2;\n    <span class="token comment">#配置HTTPS的默认访问端口为443。</span>\n    <span class="token comment">#如果未在此处配置HTTPS的默认访问端口，可能会造成Nginx无法启动。</span>\n    <span class="token comment">#如果您使用Nginx 1.15.0及以上版本，请使用listen 443 ssl代替listen 443和ssl on。</span>\n    server_name h5maker.filway.cn; <span class="token comment">#需要将yourdomain.com替换成证书绑定的域名。</span>\n    index index.html index.htm;\n    ssl_certificate cert/5800294_h5maker.filway.cn.pem;  <span class="token comment">#需要将cert-file-name.pem替换成已上传的证书文件的名称。</span>\n    ssl_certificate_key cert/5800294_h5maker.filway.cn.key; <span class="token comment">#需要将cert-file-name.key替换成已上传的证书密钥文件的名称。</span>\n    ssl_session_timeout 5m;\n    ssl_ciphers ECDHE<span class="token punctuation">-</span>RSA<span class="token punctuation">-</span>AES128<span class="token punctuation">-</span>GCM<span class="token punctuation">-</span>SHA256<span class="token punctuation">:</span>ECDHE<span class="token punctuation">:</span>ECDH<span class="token punctuation">:</span>AES<span class="token punctuation">:</span>HIGH<span class="token punctuation">:</span><span class="token tag">!NULL:</span><span class="token tag">!aNULL:</span><span class="token tag">!MD5:</span><span class="token tag">!ADH:</span><span class="token tag">!RC4;</span>\n    <span class="token comment">#表示使用的加密套件的类型。</span>\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; <span class="token comment">#表示使用的TLS协议的类型。</span>\n    ssl_prefer_server_ciphers on;\n    root /root/upload;\n    autoindex on;\n    add_header Cache<span class="token punctuation">-</span>Control &quot;no<span class="token punctuation">-</span>cache<span class="token punctuation">,</span> must<span class="token punctuation">-</span>revalidate&quot;;\n    index index.php index.html index.htm;\n\n    location / <span class="token punctuation">{</span>\n      add_header Access<span class="token punctuation">-</span>Control<span class="token punctuation">-</span>Allow<span class="token punctuation">-</span>Origin <span class="token important">*;</span>\n    <span class="token punctuation">}</span>\n\n    location /test2 <span class="token punctuation">{</span>\n         try_files $uri $uri/ @router;\n\t index index.html;\n    <span class="token punctuation">}</span>\n\n    location @router <span class="token punctuation">{</span>\n      rewrite ^.<span class="token important">*$</span> /test2/index.html last;\n    <span class="token punctuation">}</span>\n\n    location ~ /\\.ht <span class="token punctuation">{</span>\n        deny all;\n    <span class="token punctuation">}</span>\n\n    location /.well<span class="token punctuation">-</span>known/acme<span class="token punctuation">-</span>challenge/ <span class="token punctuation">{</span>\n        root /var/www/letsencrypt/;\n        log_not_found off;\n    <span class="token punctuation">}</span>\n\n    error_log logs/h5maker_error.log;\n    access_log logs/h5maker_access.log;\n<span class="token punctuation">}</span>\n\nserver <span class="token punctuation">{</span>\n    listen 80;\n    server_name h5maker.filway.cn; <span class="token comment">#需要将yourdomain.com替换成证书绑定的域名。</span>\n    rewrite ^(.<span class="token important">*)$</span> https<span class="token punctuation">:</span>//$host$1; <span class="token comment">#将所有HTTP请求通过rewrite指令重定向到HTTPS。</span>\n    location / <span class="token punctuation">{</span>\n        index index.html index.htm;\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div>',3);e.render=function(a,t,e,p,c,l){return s(),n("div",null,[o])};export default e;export{t as __pageData};
